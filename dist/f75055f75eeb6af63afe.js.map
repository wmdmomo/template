{"version":3,"sources":["webpack:///./src/services/wits.js","webpack:///./src/config.js","webpack:///./src/shared/shareMeta.js","webpack:///./src/pages/index/index.js"],"names":["service","axios","create","baseURL","CONFIG","timeout","shareData","title","desc","imgUrl","link","location","href","_callee","data","res","conf","regeneratorRuntime","wrap","_context","prev","next","params","signurl","split","platform","get","sent","window","wx","config","appId","appid","timestamp","nonceStr","noncestr","signature","jsApiList","jsapis","ready","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","stop","this","_x","_setWechatShare","apply","arguments","setWechatShare","isFetching","document","querySelector","addEventListener","url","phonenumber","getElementById","value","weixin","weibo","test","toast","mobile","wechat","method","headers","Content-Type","then","resp","code"],"mappings":"4MAGMA,EAAUC,IAAMC,OAAO,CAC3BC,QCJaC,mCDKbC,QAAS,+HEAX,IAAMC,EAAY,CAChBC,MAAO,mBACPC,KAAM,4BACNC,OAAQ,sEACRC,KAAMC,SAASC,0DAGV,SAAAC,EAA8BC,GAA9B,IAAAC,EAAAC,EAAA,OAAAC,mBAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,uBAA8BP,MAAOR,GAArCa,EAAAE,KAAA,EFLyBC,EEMI,CAChCC,QAASZ,SAASC,KAAKY,MAAM,KAAK,GAClCC,SAAU,QFPLzB,EAAQ0B,IAAI,yBAA0B,CAAEJ,WEI1C,OACCP,EADDI,EAAAQ,KAKCX,EAAOD,EAAID,KAAKA,KACtBc,OAAOC,GAAGC,OAAO,CACfC,MAAOf,EAAKgB,MACZC,UAAWjB,EAAKiB,UAChBC,SAAUlB,EAAKmB,SACfC,UAAWpB,EAAKoB,UAChBC,UAAWrB,EAAKsB,SAElBV,OAAOC,GAAGU,MAAM,WACdX,OAAOC,GAAGW,oBAAoB1B,GAC9Bc,OAAOC,GAAGY,sBAAsB3B,GAChCc,OAAOC,GAAGa,cAAc5B,KAhBrB,wBAAAK,EAAAwB,OFLA,IAAyBrB,GEKzBT,EAAA+B,8MCFHhB,OAAOC,IDEJ,SAAPgB,GAAAC,EAAAC,MAAAH,KAAAI,WCDEC,GAKF,IAAIC,GAAa,EACGC,SAASC,cAAc,WAC/BC,iBAAiB,QAAS,WACpC,IHR0BC,EAAKhC,EGQzBiC,EAAcJ,SAASK,eAAe,UAAUC,MAChDC,EAASP,SAASK,eAAe,UAAUC,MAC3CE,EAAQR,SAASK,eAAe,UAAUC,MAC3CF,EARE,YAAYK,KAYNL,GAITL,EACFW,IAAM,WAGRX,GAAa,GHvBaI,EGwBd,kEHxBmBhC,EGwBgD,CAC7EwC,OAAUP,EACVQ,OAAUL,EACVC,MAASA,GH1BJ1D,IAAM,CACX+D,OAAQ,OACRV,IAAG,GAAYA,EACfxC,KAAMQ,EACN2C,QAAS,CACPC,eAAgB,wBGsBjBC,KAAK,SAAAC,GACFA,GAAsB,MAAdA,EAAKC,OACfnB,GAAa,EACbW,IAAM,YAfRA,IAAM,aAJNA,IAAM","file":"f75055f75eeb6af63afe.js","sourcesContent":["import axios from 'axios'\nimport config from '../config'\n\nconst service = axios.create({\n  baseURL: config.API_URL,\n  timeout: 60000\n})\nexport function wechatSignature(params) {\n  return service.get('/user/weixin/signature', { params })\n}\nlet base = ''\nexport const postRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: `${base}${url}`,\n    data: params,\n    headers: {\n      'Content-Type': ' application/json'\n    }\n  })\n}\n","export default CONFIG\n","\n/* eslint-disable import/no-webpack-loader-syntax */\n// import img from '!!file-loader!~/images/logo.png'\nimport { wechatSignature } from '../services/wits'\n\nconst shareData = {\n  title: '你有一份择机而动的见识宝典待领取',\n  desc: '见识过2018的风起云涌，你的2019必须择机而动',\n  imgUrl: 'https://wpimg.wallstcn.com/834f39db-37b6-4297-9731-cf3e3b927bfe.png',\n  link: location.href\n}\n\nexport async function setWechatShare(data = shareData) {\n  const res = await wechatSignature({\n    signurl: location.href.split('#')[0],\n    platform: 'wits'\n  })\n  const conf = res.data.data\n  window.wx.config({\n    appId: conf.appid,\n    timestamp: conf.timestamp,\n    nonceStr: conf.noncestr,\n    signature: conf.signature,\n    jsApiList: conf.jsapis\n  })\n  window.wx.ready(() => {\n    window.wx.onMenuShareTimeline(data)\n    window.wx.onMenuShareAppMessage(data)\n    window.wx.onMenuShareQQ(data)\n  })\n}\n","import 'normalize.css'\nimport '~/styles/global.css'\nimport '~/styles/mobile-wrapper.css'\nimport './style.css'\nimport 'regenerator-runtime/runtime'\nimport 'wscn-affiliate'\nimport toast from 'wscn-toast'\nimport { setWechatShare } from '../../shared/shareMeta'\nimport { postRequest } from '../../services/wits'\n\nif (window.wx) {\n  setWechatShare()\n}\nfunction isPhone(phone) {\n  return /^1\\d{10}$/.test(phone)\n}\nlet isFetching = false\nconst fetchbutton = document.querySelector('.bottom')\nfetchbutton.addEventListener('click', () => {\n  const phonenumber = document.getElementById('field1').value\n  const weixin = document.getElementById('field2').value\n  const weibo = document.getElementById('field3').value\n  if (!phonenumber) {\n    toast('请填写手机号')\n    return\n  }\n  if (!isPhone(phonenumber)) {\n    toast('请输入正确的手机号')\n    return\n  }\n  if (isFetching) {\n    toast('请勿重复提交')\n    return\n  }\n  isFetching = true\n  postRequest('http://api-sit.jianshiapp.com/apiv1/circle/recruit_circle_owner', {\n    'mobile': phonenumber,\n    'wechat': weixin,\n    'weibo': weibo\n  }).then(resp => {\n    if (resp && resp.code === 20000) {\n      isFetching = false\n      toast('提交成功')\n    }\n  })\n})\n"],"sourceRoot":""}