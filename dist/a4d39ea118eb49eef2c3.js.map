{"version":3,"sources":["webpack:///./src/services/wits.js","webpack:///./src/config.js","webpack:///./src/shared/shareMeta.js","webpack:///./src/pages/index/index.js"],"names":["service","axios","create","baseURL","CONFIG","timeout","shareData","title","desc","imgUrl","link","location","href","_callee","data","res","conf","regeneratorRuntime","wrap","_context","prev","next","params","signurl","split","platform","get","sent","window","wx","config","appId","appid","timestamp","nonceStr","noncestr","signature","jsApiList","jsapis","ready","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","stop","this","_x","_setWechatShare","apply","arguments","setWechatShare","isFetching","document","addEventListener","querySelector","index_asyncToGenerator","mark","phonenumber","weixin","weibo","getElementById","value","toast","abrupt","test","mobile","wechat","post","code","message","t0"],"mappings":"mMAGMA,SAAUC,EAAMC,OAAO,CAC3BC,QCJaC,mCDKbC,QAAS,+HEAX,IAAMC,EAAY,CAChBC,MAAO,SACPC,KAAM,8BACNC,OAAQ,sEACRC,KAAMC,SAASC,0DAGV,SAAAC,EAA8BC,GAA9B,IAAAC,EAAAC,EAAA,OAAAC,mBAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,uBAA8BP,MAAOR,GAArCa,EAAAE,KAAA,EFLyBC,EEMI,CAChCC,QAASZ,SAASC,KAAKY,MAAM,KAAK,GAClCC,SAAU,QFPLzB,EAAQ0B,IAAI,yBAA0B,CAAEJ,WEI1C,OACCP,EADDI,EAAAQ,KAKCX,EAAOD,EAAID,KAAKA,KACtBc,OAAOC,GAAGC,OAAO,CACfC,MAAOf,EAAKgB,MACZC,UAAWjB,EAAKiB,UAChBC,SAAUlB,EAAKmB,SACfC,UAAWpB,EAAKoB,UAChBC,UAAWrB,EAAKsB,SAElBV,OAAOC,GAAGU,MAAM,WACdX,OAAOC,GAAGW,oBAAoB1B,GAC9Bc,OAAOC,GAAGY,sBAAsB3B,GAChCc,OAAOC,GAAGa,cAAc5B,KAhBrB,wBAAAK,EAAAwB,OFLA,IAAyBrB,GEKzBT,EAAA+B,wgBCCHhB,OAAOC,IDDJ,SAAPgB,GAAAC,EAAAC,MAAAH,KAAAI,WCEEC,GAEF,IAAIC,GAAa,EAEjBC,SAASC,iBAAiB,mBAAoB,WACxBD,SAASE,cAAc,WAC/BD,iBAAiB,QAA7BE,EAAArC,mBAAAsC,KAAsC,SAAA1C,IAAA,IAAA2C,EAAAC,EAAAC,EAAA3C,EAAA,OAAAE,mBAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAC9BmC,EAAcL,SAASQ,eAAe,UAAUC,MAChDH,EAASN,SAASQ,eAAe,UAAUC,MAC3CF,EAAQP,SAASQ,eAAe,UAAUC,MAC3CJ,EAJ+B,CAAArC,EAAAE,KAAA,eAKlCwC,IAAM,UAL4B1C,EAAA2C,OAAA,oBAT/B,YAAYC,KAiBJP,GARuB,CAAArC,EAAAE,KAAA,eASlCwC,IAAM,aAT4B1C,EAAA2C,OAAA,oBAYhCZ,EAZgC,OAalCW,IAAM,SAb4B1C,EAAA2C,OAAA,UAAA3C,EAAAE,KAAA,wBAgBpC6B,GAAa,EAhBuB/B,EAAAC,KAAA,GAAAD,EAAAE,KAAA,GHVVP,EG4BQ,CAC9BkD,OAAUR,EACVS,OAAUR,EACVC,MAASA,GH9BR1D,EAAQkE,KAAK,+BAAgCpD,GGSd,QAkB5BC,EAlB4BI,EAAAQ,KAuBlCuB,GAAa,EACS,MAAlBnC,EAAID,KAAKqD,MACXN,IAAM,QACNjC,OAAOjB,SAASC,KAAO,wCAEvBiD,IAAM9C,EAAID,KAAKsD,SA5BiBjD,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAkD,GAAAlD,EAAA,UA+BlC+B,GAAa,EACbW,IAAM1C,EAAAkD,GAAED,SAhC0B,yBAAAjD,EAAAwB,OHVjC,IAAuB7B,GGUUD,EAAA+B,KAAA","file":"a4d39ea118eb49eef2c3.js","sourcesContent":["import axios from 'axios'\nimport config from '../config'\n\nconst service = axios.create({\n  baseURL: config.API_URL,\n  timeout: 60000\n})\nexport function wechatSignature(params) {\n  return service.get('/user/weixin/signature', { params })\n}\nexport function submitRecruit(data) {\n  return service.post('/circle/recruit_circle_owner', data)\n}\n","export default CONFIG\n","\n/* eslint-disable import/no-webpack-loader-syntax */\n// import img from '!!file-loader!~/images/logo.png'\nimport { wechatSignature } from '../services/wits'\n\nconst shareData = {\n  title: '见识圈主招募',\n  desc: '2019年想要成为见识大咖？这份进阶手册帮你轻松圆梦！',\n  imgUrl: 'https://wpimg.wallstcn.com/b0942658-e34f-4dfd-84bd-23223f3fa42f.png',\n  link: location.href\n}\n\nexport async function setWechatShare(data = shareData) {\n  const res = await wechatSignature({\n    signurl: location.href.split('#')[0],\n    platform: 'wits'\n  })\n  const conf = res.data.data\n  window.wx.config({\n    appId: conf.appid,\n    timestamp: conf.timestamp,\n    nonceStr: conf.noncestr,\n    signature: conf.signature,\n    jsApiList: conf.jsapis\n  })\n  window.wx.ready(() => {\n    window.wx.onMenuShareTimeline(data)\n    window.wx.onMenuShareAppMessage(data)\n    window.wx.onMenuShareQQ(data)\n  })\n}\n","import 'normalize.css'\nimport '~/styles/global.css'\nimport '~/styles/mobile-wrapper.css'\nimport './style.css'\nimport 'regenerator-runtime/runtime'\nimport 'wscn-affiliate'\nimport toast from 'wscn-toast'\nimport { setWechatShare } from '../../shared/shareMeta'\nimport { submitRecruit } from '../../services/wits'\n\nfunction isPhone(phone) {\n  return /^1\\d{10}$/.test(phone)\n}\nif (window.wx) {\n  setWechatShare()\n}\nlet isFetching = false\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const fetchbutton = document.querySelector('.bottom')\n  fetchbutton.addEventListener('click', async () => {\n    const phonenumber = document.getElementById('field1').value\n    const weixin = document.getElementById('field2').value\n    const weibo = document.getElementById('field3').value\n    if (!phonenumber) {\n      toast('请填写手机号')\n      return\n    }\n    if (!isPhone(phonenumber)) {\n      toast('请输入正确的手机号')\n      return\n    }\n    if (isFetching) {\n      toast('正在提交中')\n      return\n    }\n    isFetching = true\n    try {\n      const res = await submitRecruit({\n        'mobile': phonenumber,\n        'wechat': weixin,\n        'weibo': weibo\n      })\n      isFetching = false\n      if (res.data.code === 20000) {\n        toast('提交成功')\n        window.location.href = 'https://jianshiapp.com/create-circle'\n      } else {\n        toast(res.data.message)\n      }\n    } catch (e) {\n      isFetching = false\n      toast(e.message)\n    }\n  })\n})\n"],"sourceRoot":""}