{"version":3,"sources":["webpack:///./src/services/wits.js","webpack:///./src/config.js","webpack:///./src/shared/shareMeta.js","webpack:///./src/pages/index/index.js"],"names":["service","axios","create","baseURL","CONFIG","timeout","shareData","title","desc","imgUrl","link","location","href","_callee","data","res","conf","regeneratorRuntime","wrap","_context","prev","next","params","signurl","split","platform","get","sent","window","wx","config","appId","appid","timestamp","nonceStr","noncestr","signature","jsApiList","jsapis","ready","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","stop","this","_x","_setWechatShare","apply","arguments","setWechatShare","Math","easeInOutQuad","t","b","c","d","easeInCubic","inOutQuintic","ts","tc","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","scrollTo","to","duration","start","document","documentElement","scrollTop","body","parentNode","change","currentTime","animateScroll","amount","val","isFetching","addEventListener","querySelector","index_asyncToGenerator","mark","phonenumber","weixin","weibo","max","scrollHeight","offsetHeight","clientHeight","getElementById","value","toast","abrupt","test","mobile","wechat","post","code","message","t0"],"mappings":"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","file":"66fe3097bb2af767826c.js","sourcesContent":["import axios from 'axios'\nimport config from '../config'\n\nconst service = axios.create({\n  baseURL: config.API_URL,\n  timeout: 60000\n})\nexport function wechatSignature(params) {\n  return service.get('/user/weixin/signature', { params })\n}\nexport function submitRecruit(data) {\n  return service.post('/circle/recruit_circle_owner', data)\n}\n","export default CONFIG\n","\n/* eslint-disable import/no-webpack-loader-syntax */\n// import img from '!!file-loader!~/images/logo.png'\nimport { wechatSignature } from '../services/wits'\n\nconst shareData = {\n  title: '见识圈主招募',\n  desc: '2019年想要成为见识大咖？这份进阶手册帮你轻松圆梦！',\n  imgUrl: 'https://wpimg.wallstcn.com/b0942658-e34f-4dfd-84bd-23223f3fa42f.png',\n  link: location.href\n}\n\nexport async function setWechatShare(data = shareData) {\n  const res = await wechatSignature({\n    signurl: location.href.split('#')[0],\n    platform: 'wits'\n  })\n  const conf = res.data.data\n  window.wx.config({\n    appId: conf.appid,\n    timestamp: conf.timestamp,\n    nonceStr: conf.noncestr,\n    signature: conf.signature,\n    jsApiList: conf.jsapis\n  })\n  window.wx.ready(() => {\n    window.wx.onMenuShareTimeline(data)\n    window.wx.onMenuShareAppMessage(data)\n    window.wx.onMenuShareQQ(data)\n  })\n}\n","import 'normalize.css'\nimport '~/styles/global.css'\nimport '~/styles/mobile-wrapper.css'\nimport './style.css'\nimport 'regenerator-runtime/runtime'\nimport 'wscn-affiliate'\nimport toast from 'wscn-toast'\nimport { setWechatShare } from '../../shared/shareMeta'\nimport { submitRecruit } from '../../services/wits'\n\nfunction isPhone(phone) {\n  return /^1\\d{10}$/.test(phone)\n}\n\nif (window.wx) {\n  setWechatShare()\n}\n\nMath.easeInOutQuad = function (t, b, c, d) {\n  t /= d / 2\n  if (t < 1) {\n    return (c / 2) * t * t + b\n  }\n  t--\n  return (-c / 2) * (t * (t - 2) - 1) + b\n}\n\nMath.easeInCubic = function (t, b, c, d) {\n  const tc = (t /= d) * t * t\n  return b + c * tc\n}\n\nMath.inOutQuintic = function (t, b, c, d) {\n  let ts = (t /= d) * t\n\n  let tc = ts * t\n  return b + c * (6 * tc * ts + -15 * ts * ts + 10 * tc)\n}\n\n// requestAnimationFrame for Smart Animating http://goo.gl/sx5sts\nvar requestAnimFrame = (function () {\n  return (\n    window.requestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || function (callback) {\n      window.setTimeout(callback, 1000 / 60)\n    }\n  )\n})()\n\nfunction scrollTo(to, callback, duration) {\n  // because it's so fucking difficult to detect the scrolling element, just move them all\n  function move(amount) {\n    document.documentElement.scrollTop = amount\n    document.body.parentNode.scrollTop = amount\n    document.body.scrollTop = amount\n  }\n  function position() {\n    return (\n      document.documentElement.scrollTop\n      || document.body.parentNode.scrollTop\n      || document.body.scrollTop\n    )\n  }\n  let start = position()\n\n  let change = to - start\n\n  let currentTime = 0\n\n  let increment = 20\n  duration = typeof duration === 'undefined' ? 500 : duration\n  const animateScroll = function () {\n    // increment the time\n    currentTime += increment\n    // find the value with the quadratic in-out easing function\n    const val = Math.easeInOutQuad(currentTime, start, change, duration)\n    // move the document.body\n    move(val)\n    // do the animation unless its over\n    if (currentTime < duration) {\n      requestAnimFrame(animateScroll)\n    } else {\n      if (callback && typeof callback === 'function') {\n        // the animation is done so lets callback\n        callback()\n      }\n    }\n  }\n  animateScroll()\n}\n\nlet isFetching = false\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const fetchbutton = document.querySelector('.bottom')\n  fetchbutton.addEventListener('click', async () => {\n    // scroll to bottom first\n    const height = Math.max(document.body.scrollHeight, document.body.offsetHeight,\n      document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight)\n    scrollTo(height)\n    const phonenumber = document.getElementById('field1').value\n    const weixin = document.getElementById('field2').value\n    const weibo = document.getElementById('field3').value\n    if (!phonenumber) {\n      toast('请填写手机号')\n      return\n    }\n    if (!isPhone(phonenumber)) {\n      toast('请输入正确的手机号')\n      return\n    }\n    if (isFetching) {\n      toast('正在提交中')\n      return\n    }\n    isFetching = true\n    try {\n      const res = await submitRecruit({\n        'mobile': phonenumber,\n        'wechat': weixin,\n        'weibo': weibo\n      })\n      isFetching = false\n      if (res.data.code === 20000) {\n        toast('提交成功')\n        window.location.href = 'https://jianshiapp.com/create-circle'\n      } else {\n        toast(res.data.message)\n      }\n    } catch (e) {\n      isFetching = false\n      toast(e.message)\n    }\n  })\n})\n"],"sourceRoot":""}